<!doctype html>
<html lang="da">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>About</title>
  <link rel="preconnect" href="https://unpkg.com" />
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <style>
    /* ... (din eksisterende CSS uændret) ... */
    .site-nav nav a.active{
      border-color:var(--nav-active);
      box-shadow:0 0 0 2px color-mix(in srgb, var(--nav-active) 25%, transparent) inset;
    }
  </style>
</head>
<body>
  <!-- NAV -->
  <header class="site-nav">
    <div class="nav-inner">
      <nav class="nav">
        <a href="/" data-text="common:nav_home">Home</a>
        <a href="/about" data-text="common:nav_about">About</a>
        <a href="/roadmap" data-text="common:nav_roadmap">Roadmap</a>
        <a href="/reports" data-text="common:nav_reports">Reports</a>
      </nav>
    </div>
  </header>

  <!-- VENSTRE: Sociale links -->
  <div class="social-menu" id="social-menu"></div>

  <!-- MOBIL HERO (kun mobil) -->
  <section class="m-hero" aria-hidden="true">
    <div class="box">
      <div class="ribbon" data-text="about:hero_ribbon">NYHED: 25% hotelrabat</div>
      <h1 data-text="about:hero_title">Om MadaCoin</h1>
      <p data-text="about:hero_sub">Donationer til skoler, solenergi og lokale jobs — med fuld gennemsigtighed.</p>
      <div class="btns">
        <!-- FIX: brug clean URLS -->
        <a class="btn primary" href="/" data-text="about:hero_cta_primary">Støt med MadaCoin</a>
        <a class="btn" href="/reports" data-text="about:hero_cta_secondary">Se rapporter</a>
      </div>
    </div>
  </section>

  <!-- TRE-KOLONNE LAYOUT -->
  <!-- ... (din eksisterende HTML uændret) ... -->

  <footer class="site-footer">
    <span data-text="common:footer">© 2025 MadaCoin. All rights reserved.</span>
  </footer>

  <!-- LOGIN MODAL -->
  <!-- ... (din eksisterende modal uændret) ... -->

  <script>
    /* Supabase client */
    const SUPABASE_URL = window.SUPABASE_URL || "https://byrlebjwknppjbtbkozt.supabase.co";
    const SUPABASE_ANON = window.SUPABASE_ANON || "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ5cmxlYmp3a25wcGpidGJrb3p0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE3NjcyNjYsImV4cCI6MjA2NzM0MzI2Nn0.3aoQMQgmxXouUfpqrwfSgcUgedjZEue6s3ZkGoqvQYY";
    const sb = window.supabase ? window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON) : null;
    window.sb = sb;

    /* site_text → udfyld tekster (common + about) */
    (async function(){
      if(!sb) return;
      try{
        const { data } = await sb.from('site_text').select('page,key,value').in('page',['common','about']);
        const dict = {}; (data||[]).forEach(r=>dict[`${r.page}:${r.key}`]=r.value);
        document.querySelectorAll('[data-text]').forEach(el=>{
          const k=el.getAttribute('data-text'); if(dict[k]!=null) el.innerHTML=dict[k];
        });
      }catch(e){ console.warn('[about] site_text', e); }
    })();

    /* Baggrund pr. side – behold 'om' hvis dine nøgler hedder bg_om_* */
    async function applyBackgroundForPage(pageKey){
      if(!sb) return;
      try{
        const keys=[`bg_${pageKey}_1x`,`bg_${pageKey}_2x`,`bg_default_1x`,`bg_default_2x`];
        const { data } = await sb.from('site_settings').select('key,value').in('key', keys);
        const map = Object.fromEntries((data||[]).map(r=>[r.key,r.value]));
        const one = map[`bg_${pageKey}_1x`] || map['bg_default_1x'] || '';
        const two = map[`bg_${pageKey}_2x`] || map['bg_default_2x'] || '';
        if(one) document.body.style.setProperty('--bg-1x', `url("${one}")`);
        if(two) document.body.style.setProperty('--bg-2x', `url("${two}")`);
      }catch(e){ console.warn('[about] background', e); }
    }
    applyBackgroundForPage('om'); // skift til 'about' hvis dine nøgler er bg_about_*

    /* Sociale links (uændret) */
    // ...

    /* Partners / personer (uændret) */
    // ...

    /* Skjult admin – FIX: redirect til /adm (clean URL) */
    const $ = s=>document.querySelector(s);
    const modal = $('#admin-modal');
    const openModal = ()=>{ modal.classList.add('active'); modal.setAttribute('aria-hidden','false'); $('#adm-email')?.focus(); };
    const closeModal = ()=>{ modal.classList.remove('active'); modal.setAttribute('aria-hidden','true'); $('#adm-msg').textContent=''; };
    $('#mdl-close')?.addEventListener('click', closeModal);
    $('#mdl-cancel')?.addEventListener('click', closeModal);

    // ... (events uændret) ...

    async function isAdmin(session){
      if(!session) return false;
      const { data, error } = await sb.from('admins').select('id').eq('id', session.user.id).maybeSingle();
      return !!data && !error;
    }
    $('#mdl-login')?.addEventListener('click', async ()=>{
      $('#adm-msg').textContent='';
      const email=$('#adm-email').value.trim(), pass=$('#adm-pass').value;
      const { error } = await sb.auth.signInWithPassword({ email, password: pass });
      if(error){ $('#adm-msg').textContent = error.message; return; }
      const { data:{session} } = await sb.auth.getSession();
      if(!(await isAdmin(session))){ $('#adm-msg').textContent='Ingen adgang.'; await sb.auth.signOut(); return; }
      window.location.href = '/adm'; // <— ændret
    });

    /* Aktiv menu – sæt .active på aktuelt link */
    (function(){
      var path=(location.pathname.replace(/\/+$/,'')||'/');
      document.querySelectorAll('.site-nav .nav a').forEach(function(a){
        var href=a.getAttribute('href');
        var norm=(href==='/'?'/':href.replace(/\/+$/,''));
        if(norm===path){ a.classList.add('active'); a.setAttribute('aria-current','page'); }
      });
    })();
  </script>
</body>
</html>
