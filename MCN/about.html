<!doctype html>
<html lang="da">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>About · MCN</title>
  <link id="favicon" rel="icon" href="/favicon_boosted.ico?v=1" type="image/x-icon" />
  <link rel="preconnect" href="https://unpkg.com" />
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>

  <style>
    :root{
      /* Grid */
      --wrap: 1680px;
      --gap: 84px;
      --left-col: 520px;
      --center-col: 460px;
      --right-col: 720px;

      /* Spacing */
      --edge-pad: 24px;

      /* Social menu (justeret pga. 2. nav-linje) */
      --social-top: 160px;

      /* Farver/stil */
      --text:#fff; --muted:#cfd3d7;
      --card:#0b0b0c; --card-border:#2a2a2a; --radius:16px;

      /* Nav */
      --nav-gap:14px; --nav-pad-x:14px; --nav-pad-y:8px;
      --nav-text:#fff; --nav-bg:#0d0d0f; --nav-border:#333;
      --nav-hover-bg:#151517; --nav-hover-border:#444; --nav-active:#5aa9ff;

      /* Baggrund (kan overskrives fra DB) */
      --bg:#061a2b;
      --bg-1x:url('https://byrlebjwknppjbtbkozt.supabase.co/storage/v1/object/public/backgrounds/MadaCoin.png');
      --bg-2x:url('https://byrlebjwknppjbtbkozt.supabase.co/storage/v1/object/public/backgrounds/MadaCoin.png');
    }

    *{ box-sizing:border-box }
    html{ font-size:16px }
    body{
      margin:0; min-height:100vh; display:flex; flex-direction:column;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial,sans-serif;
      color:var(--text);

      /* Lagdelt baggrund: overlay + foto (1x/2x) + farvefallback */
      background:
        linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.14)),
        image-set(var(--bg-1x) 1x, var(--bg-2x) 2x),
        var(--bg);
      background-repeat:no-repeat,no-repeat,no-repeat;
      background-size:auto,cover,auto;
      background-attachment:fixed,fixed,fixed;
      background-position:center center, center top, center center;

      overflow-x:hidden;
    }
    @media (max-width:900px){ body{ background-attachment:scroll,scroll,scroll } }

    /* NAV (to linjer) */
    .site-nav{ position:sticky; top:0; z-index:9999; padding:16px var(--edge-pad) 10px }
    .site-nav nav{ display:flex; flex-direction:column; gap:8px }
    .nav-row{ display:flex; gap:var(--nav-gap); align-items:center; flex-wrap:wrap }
    .site-nav a{
      display:inline-flex; align-items:center; justify-content:center;
      padding:var(--nav-pad-y) var(--nav-pad-x);
      color:var(--nav-text); background:var(--nav-bg); border:1px solid var(--nav-border);
      border-radius:12px; text-decoration:none; opacity:.96;
      box-shadow:inset 0 1px 0 rgba(255,255,255,.06);
    }
    .site-nav a:hover{ background:var(--nav-hover-bg); border-color:var(--nav-hover-border) }
    .site-nav a.active{ border-color:var(--nav-active); box-shadow:0 0 0 2px color-mix(in srgb, var(--nav-active) 25%, transparent) inset }

    /* Social menu (venstre) */
    .social-menu{
      position:fixed; top:var(--social-top); left:var(--edge-pad);
      display:flex; flex-direction:column; gap:10px; z-index:1000;
    }
    .social-menu a{
      width:42px; height:42px; display:grid; place-items:center;
      background:rgba(0,0,0,.7); border:1px solid #2a2a2a; border-radius:8px;
      text-decoration:none; transition:background-color .2s, transform .15s;
    }
    .social-menu a:hover{ background:rgba(0,0,0,.85); transform:translateY(-2px) }
    .social-menu img{ width:22px; height:22px }

    /* 3-kolonne layout */
    main{
      max-width:var(--wrap); margin:0 auto; padding:0 var(--edge-pad) 24px;
      display:grid; grid-template-columns: var(--left-col) var(--center-col) var(--right-col);
      gap:var(--gap); align-items:start; flex:1; width:100%;
    }

    /* Venstre kolonne – kamæleon + glasbokse */
    .brand-col{
      grid-column:1; display:grid; gap:12px;
      justify-items:start; padding-left:84px;   /* slip social links */
      margin-top:-96px;                         /* løft (mobil/tablet) */
    }
    .brand-col img.logo{
      width:640px; max-width:92%; height:auto;
      filter: drop-shadow(0 8px 18px rgba(0,0,0,.45));
      margin-top:40px;                          /* sænk kun logoet */
    }
    @media (min-width:1024px){
      .brand-col{ margin-top:-224px }           /* løft mere på desktop */
      .brand-col img.logo{ margin-top:64px }    /* sænk lidt igen på desktop */
    }
    .glass{
      width:480px; max-width:92%;
      background:rgba(0,0,0,.50); backdrop-filter:saturate(120%) blur(6px);
      border:1px solid rgba(255,255,255,.10); border-radius:16px; padding:14px;
      color:#eef2f6;
      box-shadow:0 8px 22px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.06);
    }
    .glass h3{ margin:0 0 8px; font-size:16px }

    /* Midterkolonnen – personer lodret */
    .center-col{ grid-column:2; display:flex; flex-direction:column; align-items:center; gap:12px; transform:translateX(-36px) }
    .photo{ border-radius:8px; overflow:hidden; width:144px; height:144px; box-shadow:0 8px 22px rgba(0,0,0,.5) }
    .photo.sm{ width:112px; height:112px }
    .label-chip{
      padding:8px 16px; border-radius:999px; border:1px solid #333; background:#0d0d0f;
      text-align:center; box-shadow:inset 0 1px 0 rgba(255,255,255,.06);
    }
    .label-chip .title{ font-size:13px; opacity:.9; margin-top:-2px }

    /* Højre kolonne – Firmaer vi arbejder med (lodret liste) */
    .right-col{ grid-column:3; margin-top:36px; padding-right:48px }
    .right-col h3{ margin:0 0 10px; color:#000 }
    .firm-card{
      border:1px solid #000; background:transparent; color:#000;
      border-radius:16px; padding:14px; display:flex; gap:14px; align-items:center;
    }
    .firm-logo{
      width:56px; height:56px; border-radius:50%; overflow:hidden;
      display:grid; place-items:center; background:transparent; border:1px solid rgba(0,0,0,.3);
    }
    .firm-role{ font-size:14px; color:#000 }

    /* Footer (sticky) */
    .site-footer{
      margin-top:auto; padding:12px 16px; text-align:center;
      background:rgba(0,0,0,.60); color:#fff; border-top:1px solid rgba(255,255,255,.10);
    }

    /* Mobil */
    @media (max-width: 900px){
      main{ grid-template-columns: 1fr; gap:18px; padding:0 16px 24px }
      .center-col{ transform:none }
      .right-col{ padding-right:0; margin-top:0 }
      :root{ --social-top: 190px }
    }
  </style>
</head>
<body>
  <!-- NAV (to linjer) -->
  <header class="site-nav">
    <nav>
      <div class="nav-row">
        <a href="/index">Hjem</a>
        <a href="/about" class="active" aria-current="page">Om</a>
      </div>
      <div class="nav-row">
        <div class="nav-row">
  <a href="https://madacoin.pro/mcd/about.html">MCD</a>


      </div>
    </nav>
  </header>

  <!-- VENSTRE: Sociale links -->
  <div class="social-menu" id="social-menu"></div>

  <main>
    <!-- Venstre kolonne: kamæleon + glasbokse -->
    <section class="brand-col" aria-label="MCN profil og info">
      <img class="logo" id="brand-hero-img" alt="MCN kamæleon-logo" />
      <article class="glass" id="role-box">
        <h3>MCN’s rolle i forhold til MCD</h3>
        <ul style="margin:0 0 0 1.2em; padding:0; list-style:disc">
          <li>Bygger løsninger og anlæg efter godkendelse fra MCD.</li>
          <li>Sørger for drift, service og vedligehold.</li>
          <li>Udvikler området løbende i dialog med MCD.</li>
          <li>Ejerskab: Alle bygninger ejes 100% af MCD (NGO’en).</li>
          <li>Afregning og kontrakter håndteres via Regnskabskontoret.</li>
        </ul>
      </article>
      <article class="glass">
        <h3>Kontakt MCN</h3>
        <div>E-mail: <a href="mailto:madacoin@madacoin.pro" style="color:#fff; text-decoration:underline">madacoin@madacoin.pro</a></div>
        <div>Telefon: <a href="tel:+2610000000" style="color:#fff; text-decoration:underline">+261&nbsp;XX&nbsp;XX&nbsp;XXX&nbsp;XX</a></div>
      </article>
    </section>

    <!-- Midterkolonnen: Julienne → Regnskabskontoret → Thomas -->
    <section class="center-col">
      <!-- Julienne -->
      <div class="photo">
        <img id="photo-top" alt="Julienne" style="width:100%;height:100%;object-fit:cover;border:1px solid #2a2a2a"
             src="https://byrlebjwknppjbtbkozt.supabase.co/storage/v1/object/public/people/Owner.jpg" />
      </div>
      <div class="label-chip">
        <div class="name" id="name-top">Julienne</div>
        <div class="title" id="title-top">Direktør</div>
      </div>

      <!-- Regnskabskontoret -->
      <div class="photo sm" style="margin-top:10px">
        <img id="photo-accounting" alt="Regnskabskontoret – Leder" style="width:100%;height:100%;object-fit:cover;border:1px solid #2a2a2a"
             src="https://byrlebjwknppjbtbkozt.supabase.co/storage/v1/object/public/people/Revision.jpg" />
      </div>
      <div class="label-chip">
        <div class="name" id="name-accounting">Regnskabskontoret</div>
        <div class="title" id="title-accounting">Leder</div>
      </div>

      <!-- Thomas -->
      <div class="photo sm" style="margin-top:10px">
        <img id="photo-mid" alt="Thomas – Projekt Leder - Udvikler" style="width:100%;height:100%;object-fit:cover;border:1px solid #2a2a2a"
             src="https://byrlebjwknppjbtbkozt.supabase.co/storage/v1/object/public/people/ADM.jpg" />
      </div>
      <div class="label-chip">
        <div class="name" id="name-mid">Thomas</div>
        <div class="title" id="title-mid">Projekt Leder - Udvikler</div>
      </div>
    </section>

    <!-- Højre kolonne: Firmaer vi arbejder med -->
    <aside class="right-col" id="firms-col" aria-live="polite">
      <h3>Firmaer vi arbejder med</h3>
      <div id="firms-right" class="firms"></div>
    </aside>
  </main>

  <footer class="site-footer">
    © 2025 MadaCoin. All rights reserved.
  </footer>

  <script>
    /* ===== Supabase client ===== */
    const SUPABASE_URL = "https://byrlebjwknppjbtbkozt.supabase.co";
    const SUPABASE_ANON = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ5cmxlYmp3a25wcGpidGJrb3p0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE3NjcyNjYsImV4cCI6MjA2NzM0MzI2Nn0.3aoQMQgmxXouUfpqrwfSgcUgedjZEue6s3ZkGoqvQYY";
    const sb = window.supabase ? window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON) : null;

    /* ===== Branding: kamæleon + favicon fra bucket 'logo' (MCN) ===== */
    function publicUrl(bucket,path){ if(!sb) return null; const {data}=sb.storage.from(bucket).getPublicUrl(path); return data?.publicUrl||null }
    function probe(url){ return new Promise(res=>{ if(!url) return res(null); const i=new Image(); let t=setTimeout(()=>res(null),6000); i.onload=()=>{clearTimeout(t);res(url)}; i.onerror=()=>{clearTimeout(t);res(null)}; i.src=url+(url.includes('?')?'&':'?')+'cb='+Math.floor(Date.now()/43200000); }); }
    async function applyBranding(){
      if(!sb) return;
      const svg = publicUrl('logo','MCN.svg');
      const png = publicUrl('logo','MCN.png');
      const hero = await probe(svg) || await probe(png);
      const img = document.getElementById('brand-hero-img');
      if(img) img.src = hero || png || svg;

      const fav = await probe(publicUrl('logo','MCN-favicon.svg')) || await probe(publicUrl('logo','MCN-favicon.png')) || hero;
      const link=document.getElementById('favicon'); if(link && fav) link.href=fav;
    }

    /* ===== Nav: markér aktiv ===== */
    (function markActive(){
      try{
        const here = location.pathname.replace(/\/index\.html?$/,'/index').replace(/\/about\.html?$/,'/about');
        document.querySelectorAll('.site-nav a').forEach(a=>{
          const to=a.getAttribute('href');
          if(to===here){ a.classList.add('active'); a.setAttribute('aria-current','page'); }
          else{ a.classList.remove('active'); a.removeAttribute('aria-current'); }
        });
      }catch(e){}
    })();

    /* ===== Overstyr baggrund fra Storage (MadaCoin.png/@2x) ===== */
    (async function applyBG(){
      if(!sb) return;
      try{
        const one = publicUrl('backgrounds','MadaCoin.png');
        const two = publicUrl('backgrounds','MadaCoin@2x.png');
        if(one){ document.body.style.setProperty('--bg-1x', `url("${one}")`); }
        if(two){ document.body.style.setProperty('--bg-2x', `url("${two}")`); }
      }catch(e){ console.warn('[about] bg override', e); }
    })();

    /* ===== Sociale links ===== */
    function normalizeUrl(u){ if(!u) return null; const t=u.trim(); return /^https?:\/\//i.test(t)?t:'https://'+t }
    function iconUrlFor(platform){
      if(!sb) return null;
      const name = platform.charAt(0).toUpperCase()+platform.slice(1).toLowerCase();
      const { data } = sb.storage.from('social.icons').getPublicUrl(`${name}.svg`);
      return data?.publicUrl || null;
    }
    function fallbackIconUrl(){
      if(!sb) return '';
      const { data } = sb.storage.from('social.icons').getPublicUrl('Globe.svg');
      return data?.publicUrl || '';
    }
    async function renderSocialLinks(){
      const el = document.getElementById('social-menu'); if(!el||!sb) return;
      el.innerHTML='';
      const { data, error } = await sb.from('social_links')
        .select('platform,url,is_active,sort_order')
        .eq('is_active', true).order('sort_order',{ascending:true});
      if(error) return;
      const globe=fallbackIconUrl();
      (data||[]).filter(r=>r.url && r.url.trim()!=='').forEach(r=>{
        const a=document.createElement('a'); const href=normalizeUrl(r.url); if(!href) return;
        a.href=href; a.target='_blank'; a.rel='noopener noreferrer'; a.title=r.platform; a.setAttribute('aria-label',r.platform);
        const img=document.createElement('img'); img.src=iconUrlFor(r.platform)||globe; img.onerror=()=>{img.src=globe};
        a.appendChild(img); el.appendChild(a);
      });
    }

    /* ===== Firmaer vi arbejder med (højre kolonne) ===== */
    async function renderFirmsRight(){
      const box=document.getElementById('firms-right');
      const col=document.getElementById('firms-col');
      if(!sb || !box || !col) return;

      try{
        const { data, error } = await sb
          .from('partners')
          .select('name,logo_url,logo_alt,category,website,active')
          .eq('active', true)
          .order('name', { ascending:true })
          .limit(12); // hent flere, vi filtrerer selv ned til 7
        if(error){ col.style.display='none'; return; }

        const rows=(data||[]).filter(p=>{
          const has = (p.logo_url&&p.logo_url.trim()!=='') || (p.name&&p.name.trim()!=='') || (p.category&&p.category.trim()!=='');
          return has;
        }).slice(0,7);

        if(!rows.length){ col.style.display='none'; return; }

        box.innerHTML='';
        rows.forEach(p=>{
          const card=document.createElement('div'); card.className='firm-card';
          const logo=document.createElement('div'); logo.className='firm-logo';
          if(p.logo_url && p.logo_url.trim()!==''){
            const img=document.createElement('img'); img.src=p.logo_url; img.alt=p.logo_alt||p.name||'Firma'; img.style='width:100%;height:100%;object-fit:cover';
            logo.appendChild(img);
          }else{
            logo.innerHTML='<span style="font-weight:700">MC</span>';
          }
          const text=document.createElement('div'); text.style.flex='1';
          const name=document.createElement('div'); name.textContent=p.name||'(Navn)'; name.style.fontWeight='600';
          const role=document.createElement('div'); role.textContent=p.category||''; role.className='firm-role';
          text.appendChild(name); if(p.category) text.appendChild(role);
          if(p.website && p.website.trim()!==''){
            const a=document.createElement('a'); a.href=normalizeUrl(p.website); a.textContent=p.website.replace(/^https?:\/\//,''); a.target='_blank'; a.rel='noopener noreferrer'; a.style='text-decoration:underline; opacity:.9; font-size:14px; display:block; margin-top:2px; color:#000';
            text.appendChild(a);
          }
          card.appendChild(logo); card.appendChild(text);
          box.appendChild(card);
        });
      }catch(e){ col.style.display='none'; }
    }

    /* ===== Init ===== */
    (async function init(){
      await applyBranding();
      await renderSocialLinks();
      await renderFirmsRight();
    })();
  </script>
</body>
</html>


